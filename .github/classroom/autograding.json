{
  "tests": [
    {
      "name": "Scenario 1 - Part 1: South American Cities",
      "setup": "sudo apt-get install -y mongodb-mongosh",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario1.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 1:[\\s\\S]*?db\\.cities\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"continent\":\"SouthAmerica\"}},{\"$sort\":{\"name\":1}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 1 - Part 2.1: Average Population by Continent",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario1.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ 1\\. Average Population[\\s\\S]*?db\\.cities\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$group\":{\"_id\":\"$continent\",\"avgPop\":{\"$avg\":\"$population\"}}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 1 - Part 2.2: Countries with Multiple Cities",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario1.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ 2\\. Counting Cities[\\s\\S]*?db\\.cities\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$group\":{\"_id\":\"$country\",\"count\":{\"$sum\":1}}},{\"$match\":{\"count\":{\"$gte\":2}}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 1 - Part 3: Asian Cities Reshaped",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario1.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 3:[\\s\\S]*?db\\.cities\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"continent\":\"Asia\"}},{\"$project\":{\"_id\":0,\"city\":\"$name\",\"pop\":\"$population\"}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 1 - Part 4: Mega-Cities Analysis",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario1.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 4:[\\s\\S]*?db\\.cities\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"population\":{\"$gt\":15}}},{\"$group\":{\"_id\":\"$continent\",\"totalPop\":{\"$sum\":\"$population\"}}},{\"$sort\":{\"totalPop\":-1}},{\"$project\":{\"_id\":0,\"region\":\"$_id\",\"total_mega_pop\":\"$totalPop\"}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 2 - Part 1: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario2.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 1:[\\s\\S]*?db\\.orders\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"status\":\"completed\"}},{\"$project\":{\"_id\":0,\"customer\":1,\"total\":1}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 2 - Part 2: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario2.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 2:[\\s\\S]*?db\\.orders\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"status\":\"completed\"}},{\"$group\":{\"_id\":null,\"avgTotal\":{\"$avg\":\"$total\"}}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 2 - Part 3: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario2.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 3:[\\s\\S]*?db\\.orders\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"status\":\"completed\"}},{\"$group\":{\"_id\":\"$customer\",\"totalSpent\":{\"$sum\":\"$total\"}}},{\"$sort\":{\"totalSpent\":-1}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 2 - Part 4: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario2.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 4:[\\s\\S]*?db\\.orders\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"status\":\"completed\"}},{\"$group\":{\"_id\":\"$customer\",\"totalSpent\":{\"$sum\":\"$total\"}}},{\"$match\":{\"totalSpent\":{\"$gt\":1000}}},{\"$sort\":{\"totalSpent\":-1}},{\"$project\":{\"_id\":0,\"VIP_Name\":\"$_id\",\"Grand_Total\":\"$totalSpent\"}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 3 - Part 1: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario3.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 1:[\\s\\S]*?db\\.phones\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$group\":{\"_id\":\"$brand\",\"AvgPrice\":{\"$avg\":\"$price\"}}},{\"$project\":{\"_id\":0,\"BrandName\":\"$_id\",\"AvgPrice\":1}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 3 - Part 2: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario3.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 2:[\\s\\S]*?db\\.phones\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$unwind\":\"$features\"},{\"$group\":{\"_id\":\"$features\",\"count\":{\"$sum\":1}}},{\"$sort\":{\"count\":-1}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 3 - Part 3: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario3.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 3:[\\s\\S]*?db\\.phones\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"price\":{\"$gt\":700}}},{\"$sort\":{\"price\":-1}},{\"$project\":{\"_id\":0,\"model\":1,\"price\":1}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 3 - Part 4: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario3.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 4:[\\s\\S]*?db\\.phones\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"features\":\"5G\"}},{\"$group\":{\"_id\":\"$brand\",\"avgPrice\":{\"$avg\":\"$price\"}}},{\"$sort\":{\"avgPrice\":1}},{\"$project\":{\"_id\":0,\"Brand\":\"$_id\",\"Avg_5G_Price\":\"$avgPrice\"}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 4 - Part 1: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario4.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 1:[\\s\\S]*?db\\.students\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$group\":{\"_id\":\"$major\",\"minGPA\":{\"$min\":\"$gpa\"},\"maxGPA\":{\"$max\":\"$gpa\"},\"avgGPA\":{\"$avg\":\"$gpa\"}}},{\"$project\":{\"_id\":0,\"Department\":\"$_id\",\"MinGPA\":\"$minGPA\",\"MaxGPA\":\"$maxGPA\",\"AvgGPA\":\"$avgGPA\"}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 4 - Part 2: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario4.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 2:[\\s\\S]*?db\\.students\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"year\":4,\"gpa\":{\"$gt\":3.5}}},{\"$sort\":{\"gpa\":-1}},{\"$project\":{\"_id\":0,\"name\":1,\"major\":1}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 4 - Part 3: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario4.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 3:[\\s\\S]*?db\\.students\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$group\":{\"_id\":\"$year\",\"count\":{\"$sum\":1}}},{\"$sort\":{\"_id\":1}},{\"$project\":{\"_id\":0,\"Year\":\"$_id\",\"Count\":\"$count\"}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    },
    {
      "name": "Scenario 4 - Part 4: Output Verification",
      "setup": "",
      "run": "mongosh --nodb --eval 'const fs=require(\"fs\"); const content=fs.readFileSync(\"scenario4.mongodb\", \"utf8\"); const snippet=content.match(/\\/\\/ Part 4:[\\s\\S]*?db\\.students\\.aggregate\\(\\[([\\s\\S]*?)\\]\\)/)[1]; console.log(\"[\"+snippet+\"]\".replace(/\\s+/g, \"\"))'",
      "input": "",
      "output": "[{\"$match\":{\"gpa\":{\"$gte\":3.5}}},{\"$group\":{\"_id\":\"$major\",\"count\":{\"$sum\":1}}},{\"$sort\":{\"count\":-1}},{\"$limit\":2},{\"$project\":{\"_id\":0,\"Major\":\"$_id\",\"Honor_Student_Count\":\"$count\"}}]",
      "comparison": "included",
      "timeout": 10,
      "points": 5
    }
  ]
}
